<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Speed Drift - Elite Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="wrapper">
      <div class="header-bar">
        <div class="uc-badge">Spent UC: <span id="uc-val">0</span></div>
        <div class="controls">
          <button class="icon-btn" id="soundToggle" onclick="toggleSound()" title="Sound">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
          </button>
          <button class="icon-btn" onclick="showInfo()" title="Info">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
          </button>
        </div>
      </div>

      <div class="game-scene" id="gameScene">
        <div class="wind-overlay"></div>
        <div class="tunnel"><div class="road"></div></div>
        <div class="car-wrapper">
          <div class="car-mock">
            <div class="car-body"></div>
            <div class="taillight left"></div>
            <div class="taillight right"></div>
          </div>
        </div>
        <div class="speed-display"><div id="speed-txt">0</div></div>
      </div>

      <div class="rail-container">
        <div class="rail-bg">
          <div class="rail-fill" id="fill"></div>
          <div class="dot" style="left: 12.5%"><span class="label">1XU</span></div>
          <div class="dot" style="left: 25%"><span class="label">3XU</span></div>
          <div class="dot" style="left: 37.5%"><span class="label">UMB</span></div>
          <div class="dot" style="left: 50%"><span class="label">PAN</span></div>
          <div class="dot" style="left: 62.5%"><span class="label">AWM</span></div>
          <div class="dot" style="left: 75%"><span class="label">MYTH</span></div>
          <div class="dot" style="left: 87.5%"><span class="label">1TIC</span></div>
          <div class="dot" style="left: 100%"><span class="label">2TIC</span></div>
        </div>
      </div>

      <div class="actions">
        <div id="start-panel">
          <button class="btn-primary action-btn" id="startBtn" onclick="play('start')">START (60 UC)</button>
        </div>
        <div id="play-panel" style="display: none; flex-direction: column; gap: 15px">
          <button class="btn-primary action-btn" id="btn-safe" onclick="play('safe')">SAFE ACCEL</button>
          <button class="btn-secondary action-btn" id="freeBtn" onclick="play('free')">FREE ACCEL</button>
          <button class="btn-danger action-btn" id="collectBtn" onclick="collect()">STOP & COLLECT</button>
        </div>
      </div>

      <div class="log-container">
        <div class="log-header">SYSTEM LOGS</div>
        <div class="log-box" id="logs"></div>
      </div>

      <div class="modal-overlay" id="infoModal" aria-hidden="true">
        <div class="modal-panel">
          <button class="close-icon" onclick="hideInfo()">âœ•</button>
          <h3>GAME RULES</h3>
          <ul>
            <li><strong>Start:</strong> Cost 60 UC to launch.</li>
            <li><strong>Safe Accel:</strong> Pay UC to protect progress. Guaranteed win after 3 fails.</li>
            <li><strong>Free Accel:</strong> No cost, but failure resets to 0.</li>
            <li><strong>Jumps:</strong> Chance to skip +1, +2 or +3 levels.</li>
          </ul>
        </div>
      </div>

      <div class="modal-overlay" id="rewardModal" aria-hidden="true">
        <div class="modal-panel reward-style">
          <h2>ðŸŽ‰ SUCCESS!</h2>
          <div class="reward-sub">You received:</div>
          <div class="reward-item" id="rewardName">-</div>
          <button class="btn-primary action-btn" onclick="closeRewardModal()">CONTINUE</button>
        </div>
      </div>
    </div>

    <audio id="accelSound" preload="auto"><source src="./sounds/accel_sound.m4a" type="audio/mp4" /></audio>
    <audio id="successSound" preload="auto"><source src="./sounds/success_sound.m4a" type="audio/mp4" /></audio>
    <audio id="failureSound" preload="auto"><source src="./sounds/failure_sound.m4a" type="audio/mp4" /></audio>

    <script src="app.js"></script>
  </body>
</html>